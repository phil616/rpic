# 虚拟机和子应用启动相关备忘录

## 一/虚拟机独立原则
1. 每个虚拟机对应一个subapp
2. 每个虚拟机只能运行一个subapp

在这种条件下才能保障资源相互独立。可以不关心硬件。

## 二/硬件架构

每个硬件（或者虚拟硬件）中运行若干个虚拟机，每个虚拟机运行一个subapp。

硬件可以是Docker容器，也可以是实体机。

## 三/虚拟机启动流程（ScriptLoader）
对于ScriptLoader而言，务必有一个虚拟机环境
并且区分硬件/虚拟硬件/虚拟机/和虚拟环境的概念。

1. 硬件：实体机
2. 虚拟硬件：Docker容器
3. 虚拟机：OpenStack等模拟实体机的虚拟机
4. 虚拟环境：Python虚拟环境

虚拟机启动流程：

1. loadup阶段：调用Python的Venv模块创建虚拟环境 
2. clone阶段：下载模块代码仓库
3. install阶段：安装依赖，可以从官方仓库安装，可以从缓存仓库安装，可以从私有仓库安装
4. test阶段：测试应用的可用性，是否与主机联通，是否配置正确，数据库等是否可用
5. bootup阶段：启动应用，uvicorn等
